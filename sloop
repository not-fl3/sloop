#!/bin/sh

SOURCE="H4sIAAAAAAAAA91Y7W+jNhj/nr/C9aQIpIRrezrpRNZOut6+TbvTJm0f2lNEwGnRACNjmmYR//seY2NsAgn0bps2VKVg+3l/4fdQFgQVPPL9wwzBFVO4K0iyXaDfWcxJtaiX84A/+f5n+FXPjIakKHz/jqZpkEWLWbWazVIaIU5YiiSvvNygbYZCmlBGIof5KH57vUCP6v9G/efkhftoXnDmouUt+pWzOHtULMTFCC9ZhraUpQG/cPDDy9WH+7fvV9erQyX/0kNVL16meIEYSADmkq+7qtlUs2o2++4+Iix+Js5dQjOyQB/Jpnx0v8yEmiC8DDks5SSLSBbulfyQBZyssyAlvlJM2s+SeLOunaKXjyQMsf5QxgmcOyPBZt74fJ0GIaM+2lCayFUSxTymmX00aoTFpPDRbyT8vhV/K49sSQBubbYlsdqiOY/T+M9A8hUxEsbFaZ4MWqFCnZGdIxXX4RyiEFdCuGE/ukGf6zRruLj6oLi8bZzIg05no8x2LMi7q5yuQYcpZ8ED3Q1G8iQIiYOXkFl4jSGf9IFTltmRXVjr0kHiV8iluwxqw+0cMUK9DZKiw0HHHF9fXl9hU337oJ0HzyS8uP9in2jToG/XzoTLdrNSZWUGfxfzp7WWuHdkF2kXIClal43KjbTklgmQIYKpZ66tNIW56uVl8eS0sr1QVKTjuqvR4TPZ2V7xPKHFeV8o3ypHqKcJpSHMb+LTmN48t3Y0K9Jk9WSmxGmbNf1C2dVrj8o4ZYrOv1GmnHO05qZuhtN5hOPbolO6mv31m6hrMmzvv0rpttyV0t1W/xqlDSYnQ2vWuBJ/9AL4aqeZHCe7ZyNY1qrVevxCijLhxhttgRz3tlM7+gUNhdMgB0su9oqE0vwNnDtU3qHCtlp1sQ118Hgr91sPg7txQTGqEIFuLZ6EAliZIy6jCoG8fdHNtaauR17igheO23FeDmnFk6xjQG3EoUJxgcoccYoiULZjhbgEIPP9BoRdvXu3QNfip76bd+y0X3+GzuJSQOzTH84RTrKOtdhI3w6Xh7jMkjrp+MrQqHVtv39wnYk1lOwG95UuMYQ37TlMI0gwBYJlQDErCx5i4zAc8gL2CCBiWcvErnwMkl2wL7CdGUeJZTcfg5XQcMn3OWn4CaplTYU7kTPIABQTlpkk6yOSJovHixbJ3hubIyrhUkV15Olel6m3gkWj1voJaMmXUay9LOu8Lx5zPVIcqjcFC0Uv8FgBSE8GQdSkQQanDTSD4kylioVQBn3W+L0/MPPeHiUu0O3mKIHFZYKbtlzMZV19dlH3xkkYp5BAa5kGH8OZsH08axJWbG4ewJYHjDUU6tek5f7T+RDi5V2TGFocvGuWCXkmSe03GUvz/eN26hjyJYdSvqmZygfH1YOCAfihOi/kvldwsKDwijIUY/BRxxZTNAzVtOa0E3P0OkgSZ66pxZYpo4eYMDZEDFtDxLoX4gOY4/9QdcOjmviPwN3pD8Cp/j6tt4/q65XbjujGvGzjiE2cBWxvzr0gnXWWpKBPuQiyPdGSjLN9TsE19pz8muG5GYUHB+AapBzDoH5g1BjWM+VpC3v2pKk/i+8YNpY2DMWipaVBnImeNhwkc5i8ev/qYbIXuNXGtchtqlMgE8hktGhg/w7qHytefYyhwKeB9mpKnw7t24A0s5MRocmamcTt/eBnhLGD6qSh/V8Y1f+GAf3cQDs6It9yeO0fdIBRZ8A5D3hHYd4W+NahqnM9KCAbGNnqN+CaMgfjbuZLFKYzcGDKqU+pNtbxW5mJJkpS4EGiC8d6Ef1TKFu2mSkwFyj6YS6wFMrqnuE2+V9/2DwjwYDEHRjci6PHAeL/NVqdhBHnnWSdCP+MEP/30Z+CfacnvZbLR+jEF10egA8tFhq+/QVzCLGRSxoAAA=="

mkdir -p .sloop
if [ ! -f .sloop/libsloop.rlib ]; then
    echo $SOURCE | base64 -di | zcat > .sloop/sloop.rs
    rustc --crate-type lib .sloop/sloop.rs --out-dir .sloop
fi
rustc build.rs --edition=2018 --extern sloop=.sloop/libsloop.rlib --out-dir .sloop
.sloop/build
